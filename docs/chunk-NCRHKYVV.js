import{a as g}from"./chunk-4PCLS6S2.js";import{f as l}from"./chunk-IQNB5OR6.js";import{c as p}from"./chunk-R2PKSOOZ.js";import{_ as u,ba as r,ga as i}from"./chunk-V4IO6WE6.js";var m={production:!0,apiUrl:"https://webapidevlog.azurewebsites.net"};var h={issuer:"http://localhost:4200",clientId:"Ov23liMqYIA5VGL6M2cl",redirectUri:window.location.origin+"/auth/callback",responseType:"code",scope:"read:user user:email",strictDiscoveryDocumentValidation:!1,showDebugInformation:!0,loginUrl:"https://github.com/login/oauth/authorize",requireHttps:!1};var s="authToken",n=class o{hasToken(){return!!this.getToken()}setToken(e){localStorage.setItem(s,e)}getToken(){return localStorage.getItem(s)}removeToken(){localStorage.removeItem(s)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=r({token:o,factory:o.\u0275fac,providedIn:"root"})};var a=m.apiUrl;var f=class o{constructor(e,t,c,k){this.http=e;this.oauthService=t;this.router=c;this.tokenService=k;this.oauthService.configure(h),t.loadDiscoveryDocumentAndTryLogin().then(console.log)}login(e,t){this.http.post(`${a}/api/v1/users/login`,{email:e,password:t}).subscribe({next:c=>{this.tokenService.setToken(c.token.value),this.router.navigateByUrl("/")}})}loginWithGithub(){this.oauthService.initLoginFlow()}githubUser(){this.http.get(`${a}/auth/user`).subscribe()}logout(){this.tokenService.removeToken(),this.router.navigateByUrl("auth/login")}isAuthenticated(){return!1}githubAuthorize(e){this.http.post(`${a}/auth/github/login`,{code:e}).pipe(u(t=>{this.tokenService.setToken(t.token.value),this.router.navigateByUrl("/")})).subscribe()}static \u0275fac=function(t){return new(t||o)(i(p),i(g),i(l),i(n))};static \u0275prov=r({token:o,factory:o.\u0275fac,providedIn:"root"})};export{n as a,f as b};
